doctype html

- var css_src = './styles/main.css';
- var favicon_src = './favicon.gif';

html(lang='en')

  head
    meta(charset='utf-8')
    link(href=css_src, rel='stylesheet')
    link(rel='shortcut icon', href=favicon_src, type='image/gif')

    script(type='text/javascript').
      function setup_nav() {

        var prev_section;

        function activate_section(section) {
          return function(e) {
            if (!section) return;
            if (prev_section) {
              if (prev_section.classList) {
                prev_section.classList.remove('active');
              } else {
                prev_section.className = '';
              }
            }
            if (section.classList) {
              section.classList.add('active');
            } else {
              section.className = 'active';
            }
            prev_section = section;
          }
        }

        var nav_links = document.getElementsByClassName('nav-link');
        for (var i = 0,
             links_count = nav_links.length,
             link, section, section_id;
             i < links_count; i++) {
          link = nav_links[i];
          // it should be 1 or more symbols before '-href'
          if (!link.id || (link.id.indexOf('-href') < 1)) continue;
          section = (section_id = link.id.substr(0, link.id.length - 5),
                     document.getElementById(section_id));
          if (!section) continue;
          link.addEventListener('click', activate_section(section), false);
        }

      }

  body.theme-a

    // NAVIGATION
    nav
      ul

        mixin nav_item(id, label)
          a(id!=id+'-href',href!='#'+id,class='nav-link')= label

        li.active
            +nav_item('contacts', 'Contacts')
        li: +nav_item('posts',    'Posts')
        li: +nav_item('links',    'Links')
        //- li: +nav_item('vcard',    'VCard')
        li: +nav_item('cv',       'CV')
        li: +nav_item('sounds',       'Sounds')
        //- li: +nav_item('story',    'Story')
        li: +nav_item('social',   'Social')

        //- latest-songs, files
        //- geek code, data (stuff like age,occupation,location),
        //- non-dev stuff, self-created projects,
        //- participated project, latest-posts,

    // SECTION: ABOUT
    header#about

      include sections/about

    // MAIN
    main

      // SECTION: CONTACTS
      section#contacts.active
        h2 Contacts

        include sections/contacts

      // SECTION: POSTS
      section#posts
        h2 Posts

        include sections/posts

      // SECTION: LINKS
      section#links
        h2 Links

        include sections/links

      //- // SECTION: VCARD
      //- section#vcard
      //-  h2 VCard

      //-  include sections/vcard

      // SECTION: CV
      section#cv
        h2 CV

        include sections/cv

      // SECTION: CV
      section#sounds
        h2 Sounds

        include sections/sounds

      //- // SECTION: STORY
      //- section#story
      //-   h2 Story

      //-   include sections/story

      // SECTION: SOCIAL
      section#social
        h2 Social

        include sections/social

    footer
      p Designed by shaman.sir &copy; 2014

    script(type='text/javascript').
      setup_nav();
