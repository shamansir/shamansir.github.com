@import 'bourbon/bourbon'

@import './_gld.sass'

@import './_themes.sass'
@import './themes/_theme-a.scss'

// =============================================

$sans:  'Gill Sans', Optima, 'Trebuchet MS', 'Lucia Grande', Futura, sans-serif
$serif: 'Charter', 'Didot', Optima, serif

$text-font: $serif
$heading-font: $sans
$nav-font: $sans
$links-font: $serif
$icon-list-font: $serif // Optima, 'Trebuchet MS', 'Lucia Grande', Futura, sans-serif
//$lists-font: 'Avenir Next', 'Avenir', sans-serif
$footer-font: $serif

// FONTS

html *
  margin: 0
  font-family: $text-font

h1, h2, h3
  font-family: $heading-font

a, a *
  font-family: $links-font

nav a, nav a *
  font-family: $nav-font

footer, footer *
  font-family: $footer-font

ul.icon-list
  li a, li a *
    font-family: $icon-list-font
    //font-weight: lighter

body
  height: 100%

footer
  position: fixed
  left: 0.5em
  bottom: 0.5em

// COLOR DIFFERENTIATION (TODO REMOVE LATER)

// main
//   background-color: #f00
//   border-left: 2px solid #f00

// header
//   border-right: 1px solid #00f
//   background-color: #0f0

// nav
//   background-color: rgba(0,255,255,.5)

// section.active
//   background-color: #ccc

// body.loading
//   &:before
//     background-color: #00f

// section > div
//   background-color: #ff0

// COLUMNS

$nav-height: 1.5em

header, nav, main
  margin: 0
  padding: 0
  position: fixed
  overflow: hidden

header
  width: $med
  text-align: right

nav
  width: $large
  top: 0
  left: $med
  height: $nav-height

main
  width: $large
  position: fixed
  left: $med

// STYLING

$center-margin: 0.8em
$top-margin: 3em
$bottom-margin: 3em
$side-margin: 3em

header
  //padding: $xsmall 20px 20px 0
  border-right: 1px solid

  & > div > img
    position: relative
    right: -18px
    top: 2px

  & > div:after
    content: 'â€»'
    position: relative
    top: 0.3em

header > div
  padding: $top-margin $center-margin $bottom-margin $side-margin

section > div
  padding: 0 $side-margin 0 $center-margin

nav ul
  list-style: none
  margin: 0
  padding: 0
  display: block

  li
    position: relative
    float: left

    // & > a, & > label
    //   display: block

    & > ul
      position: fixed
      //position: absolute
      display: inline
      //left: 0
      //top: -1em
      margin-top: -($nav-height * 1.7)

      li
        display: inline

section ul > li > a > img
  width: 32px
  height: 32px

  // & > li > ul
  //   display: block
  //   position: relative
  //   top: -2em

  // & > li, & > li > ul > li
  //   float: left
  //   display: inline

footer
  font-size: 0.6em

body.no-js

  header
    top: 0

    div
      padding-top: 1em

  main
    top: $nav-height
    overflow-y: scroll
    height: $full

  section
    padding-top: 1em

    & > h2
      margin-left: $center-margin

    & > div
      margin-top: 0
      //padding-top: $top-margin
      //padding-bottom: $bottom-margin

body.loading

  header, nav, main
    display: none

  &:before
    content: 'Loading...'
    font-size: 2em
    position: fixed
    top: 0
    //bottom: 0
    right: 0
    padding-top: 0.3em
    padding-right: 0.5em

body.has-js
  $top-position: $xsmall
  //$main-height: ($full - $top-position)
  $base-height: $large
  $transition-duration: .3s

  overflow: hidden

  header
    display: table
    top: $top-position
    height: $base-height

    & > div
      display: table-cell
      vertical-align: middle

  nav
    top: $top-position
    margin-top: -$nav-height

  main
    top: $top-position
    height: $base-height
    //min-height: ($full - $top-position)

  section
    // changing "display" breaks transitions
    display: table
    visibility: hidden
    opacity: 0
    position: fixed
    top: $top-position
    height: $base-height
    left: $full
    @include transition(opacity $transition-duration ease, left $transition-duration ease, visibility $transition-duration ease)
    //max-height: $base-height

    & > h2
      display: none

    & > div
      display: table-cell
      vertical-align: middle
      height: $full
      //height: ($base-height - ($vert-margin + $vert-margin))
      overflow: hidden

    &.active
      visibility: visible
      left: $med
      opacity: 1
      @include transition(opacity $transition-duration ease, left $transition-duration ease, visibility $transition-duration ease)

// TODO: before loading, set image sizes so they will not jump

